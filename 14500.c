#include <stdio.h>

int map[600][600];

int block[7][4][4][4] = {
    {                                     // @@@@
        {
            {1,1,1,1}, {0,0,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,0,0,0}, {1,0,0,0}, {1,0,0,0}, {1,0,0,0}
        },
        {
            {1,1,1,1}, {0,0,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,0,0,0}, {1,0,0,0}, {1,0,0,0}, {1,0,0,0}
        }
    },
    {                                   // @@@
        {                               //   @
            {1,1,1,0}, {0,0,1,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {0,1,0,0}, {0,1,0,0}, {1,1,0,0}, {0,0,0,0}
        },
        {
            {1,0,0,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,1,0,0}, {1,0,0,0}, {1,0,0,0}, {0,0,0,0}
        }
    },
    {                                   // @@@
        {                               // @
            {1,1,1,0}, {1,0,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,1,0,0}, {0,1,0,0}, {0,1,0,0}, {0,0,0,0}
        },
        {
            {0,0,1,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,0,0,0}, {1,0,0,0}, {1,1,0,0}, {0,0,0,0}
        }
    },
    {                                   // @@@
        {                               //  @
            {1,1,1,0}, {0,1,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {0,1,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}
        },
        {
            {0,1,0,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,0,0,0}, {1,1,0,0}, {1,0,0,0}, {0,0,0,0}
        }
    },
    {                                   // @@
        {                               // @@
            {1,1,0,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,1,0,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,1,0,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,1,0,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}
        }
    },
    {                                   //  @@
        {                               // @@
            {0,1,1,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,0,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}
        },
        {
            {0,1,1,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {1,0,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}
        }
    },
    {                                   // @@
        {                               //  @@
            {1,1,0,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {0,1,0,0}, {1,1,0,0}, {1,0,0,0}, {0,0,0,0}
        },
        {
            {1,1,0,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}
        },
        {
            {0,1,0,0}, {1,1,0,0}, {1,0,0,0}, {0,0,0,0}
        }
    }
};

int calc(int r, int c) {
    int count, max = -1, flag;
    for (int i = 0; i < 7; i++) // 모든 도형
        for (int j = 0; j < 4; j++) { // 회전
            count = 0, flag = 0;
            for (int k = 0; k < 4; k++) {
                for (int l = 0; l < 4; l++) {
                    if (map[r + k][c + l] == -1 && block[i][j][k][l] == 1) { // input map 범위 넘어갔을 경우 다음 도형 검사
                        flag = 1;
                        break;
                    }
                    else if (block[i][j][k][l] == 1) // 도형 겹치는 부분 합 계산
                        count += map[r + k][c + l];
                }
                if (flag)
                    break;
            }

            if (count > max) // max 값 갱신
                max = count;
        }

    return max;
}

int main()
{
    int n, m, max = 0, score;
    scanf("%d %d\n", &n, &m);
    for (int i = 0; i < n + 10; i++)
        for (int j = 0; j < m + 10; j++)
            map[i][j] = -1;
    for (int i = 0; i < n; i++)
        for (int j = 0; j < m; j++)
            scanf("%d", &map[i][j]);

    for (int i = 0; i < n; i++)
        for (int j = 0; j < m; j++) {
            score = calc(i, j);
            if (score > max)
                max = score;
        }
    printf("%d\n", max);

    return 0;
}